---
isChild: true
anchor:  complex_problem
---

## בעיות מורכבות {#complex_problem_title}

אם אי פעם קראתם על הזרקת תלויות, נתקלתם לוודאי במונחים *"היפוך שליטה"* או *"עקרון היפוך תלויות"*. 
אלו הן הבעיות המורכבות אשר נפתרות באמצעות הזרקת תלויות.

### היפוך שליטה

היפוך שליטה הוא כפי שנכתב, "הפיכה של שליטה" של מערכת באמצעות ניתוק מוחלט של ניהול הסדר מניהול האובייקטים.
במונחים של הזרקת תלויות, הכוונה היא החלשת התלויות באמצעות שליטה ויצירת מופעים שלהם במיקום אחר במערכת.

במשך שנים, מערכות PHP מיישמות היפוך שליטה, אך השאלה הנשאלת היא, איזה חלק של שליטה אנו הופכים ולאן?
לדוגמא, מערכות MVC בדרך כלל מגדירות "סופר עצם/אובייקט" או לוגיקה בסיסית אשר לוגיקות אחרות חייבות לרשת על מנת
לקבל גישה לתלויות שלהן. זוהי **ה**הגדרה של היפוך שליטה. עם זאת, במקום להחליש תלויות, שיטה זו פשוט מעבירה אותן
למקום אחר.

הזרקת תלויות מאפשרת לנו פתרון אלגנטי יותר לבעיה כך שאנו מזריקים רק את התלויות הנדרשות לנו, מתי שהן נדרשות לנו,
ללא צורך להגדרת תלויות קשיחות כלל.

### עקרון היפוך תלויות

עקרון היפוך תלויות מהווה את ה- "D" בראשי התיבות S.O.L.I.D מכלול עקרונות בעיצוב מונחה עצמים המנחה אותנו כך: 
*"סמכו על הפשטות, אל תסמכו על הקשחות"*. בפשטות, הכוונה היא שיש להגדר תלויות כממשקים/חוזים או מחלקות מופשטות
ולא במימוש קשיח. ניתן לשנות את קוד הדוגמא הקודמת כך שתמלא אחר עקרון זה.

{% highlight php %}
<?php
namespace Database;

class Database
{
    protected $adapter;

    public function __construct(AdapterInterface $adapter)
    {
        $this->adapter = $adapter;
    }
}

interface AdapterInterface {}

class MysqlAdapter implements AdapterInterface {}
{% endhighlight %}

ישנם יתרונות ברורים למחלקת `Database` שכעת תלויה בממשק ולא במחלקה קשיחה.

חשבו על סיטואצייה שבה אתם עובדים בצוות והמתאם נמצא בעבודה של חבר צוות אחר. בדוגמה הראשונה שלנו, היינו נאלצים 
להמתין לחבר הצוות הנ"ל עד שיסיים את עבודתו על המתאם לפני שהיינו יכולים לחקות את המימוש עבור יחידת הבדיקות שלנו.
כעת, שהתלות נמצאת בממשק/חוזהת אנו יכולים לחקות אותו בשמחה תוך ידיעה שחבר הצוות שלנו שבונה את המתאם יתבסס על
אותו החוזה שקבענו קודם.

יתרון גדול עוד יותר לשיטת מימוש זו הוא שהקוד שלנו הוא יותר סקלבילי כעת. אם בעוד שנה נחליט שאנו רוצים להגר לסוג 
מאגר נתונים אחר, נוכל פשוט לכתוב מתאם חדש אשר יישם את הממשק המקורי ויזריק אותו במקום, לא יהיה צורך בשכתוב קוד
נוסף מעבר לכך מכיוון שאנו יכולים להיות בטוחים שהמתאם מממש את תנאי החוזה שהוגדרו ע"י הממשק.